<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>XHR GET JSON</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
</head>
<body>

<div class="container-sm d-flex justify-content-center">
  <div class="container-fluid m-2 p-2 border border-3 rounded">
    <div class="card">
        <div class="card-header">XHR POST</div>
        <div class="card-body">
          <h3>URL</h3>
          <input type="text" class="form-control" id="url" value="https://api.restful-api.dev/objects" readonly>
          <h3>Name</h3>
          <input type="text" class="form-control" id="name" value="Jackie">
          <h3>Data</h3>
          <input type="text" class="form-control" id="data" value="Hello">
          <div class="btn btn-primary" id="query-button">XHR POST</div>
          <h3>Sent Data</h3>
          <input type="text" class="form-control" id="sent" readonly>
          <h3>Response Type</h3>
          <input type="text" class="form-control" id="response-type">
          <h3>Response</h3>
          <textarea id="response" class="form-control" rows="5"></textarea>
        </div>
    </div>
  </div>
</div>

<script>
  document.querySelector("#query-button").addEventListener('click', (ev) => {
    const xhr = new XMLHttpRequest()
    const post_url = document.querySelector("#url").getAttribute('value')
    // Create request
    xhr.open('POST', post_url)
    xhr.setRequestHeader("Content-Type", "application/json")
    const name = document.querySelector('#name').getAttribute('value')
    const data = document.querySelector('#data').getAttribute('value')
    const sendData = JSON.stringify({'name': name, 'data': data})
    document.querySelector('#sent').setAttribute('value', sendData)
    // Define handler
    xhr.onload = () => {
        document.querySelector("#response-type").setAttribute('value', typeof(xhr.response))
        document.querySelector("#response").innerText = xhr.response
    }
    // Send request
    xhr.send(sendData)
    })
</script>
</body>
</html>
